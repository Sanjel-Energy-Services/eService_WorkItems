
```mermaid
classDiagram
direction TB

class ProgramRequest {
	<<aggregate root>>
	-programId: String
	-client: Client
	-requestType: RequestType
	-programType: ProgramType
	-jobs: List~ProgramJob~
	-docs: List~Document~
	-complexityColor: ComplexityColor
	-serviceLine: ServiceLine
	-dueDate: DateTime
	-currentState: RequestLifecycleState
	-priority: Priority
	+submit()
	+assignToEngineer()
	+markForReview()
	+approve()
	+reject()
	+complete()
}

class ProgramJob {
	<<entity>>
	-jobId: String
	-jobType: JobType
	-complexityColor: ComplexityColor
	-docs: List~Document~
	+determineComplexity()
	+assignApprovalPath()
}

class Notification {
	<<entity>>
	-notificationId: String
	-recipient: String
	-type: NotificationType
	-content: String
	-sharePointLink: String
	-appLink: String
	-sentDate: DateTime
	-status: NotificationStatus
	+send()
	+trackDelivery()
}

class ActivityLog {
	<<entity>>
	-logId: String
	-programId: String
	-action: String
	-performedBy: String
	-timestamp: DateTime
	-details: String
	+log()
	+retrieveHistory()
}

class Document {
	<<entity>>
	-documentId: String
	-version: Version
	-content: DocumentContent
	-uploadDate: DateTime
	+upload()
	+version()
	+validate()
}
	
class Approval {
	<<entity>>
	-approvalId: String
	-approverType: ApproverType
	-approverName: String
	-decision: Decision
	-comments: Comments
	-timestamp: DateTime
	+approve()
	+reject()
	+addComments()
}

class ApproverType {
	<<enumeration>>
	PEER_REVIEW
	MANAGER_REVIEW
	MANAGER_APPROVAL
	DIRECTOR_APPROVAL
}

class RequestType {
	<<enumeration>>
	EMAIL_FORWARDING
	WEB_PORTAL_FORM
}

class ComplexityColor {
	<<enumeration>>
	GREEN  // Peer Review required
	YELLOW // Manager/Lead Review required
	RED    // Manager Approval required
	BLACK  // Manager + Director/VP Approval required
}

class Priority {
	<<enumeration>>
	URGENT  // < 4 hours
	HIGH    // Due same day
	MEDIUM  // Due within 2 days
	LOW     // > 2 days
	NORMAL  // No due date
}


class NotificationType {
	<<enumeration>>
	ASSIGNMENT
	REVIEW_REQUEST
	REVIEW_ACCEPTED
	REVIEW_COMPLETED
	APPROVAL_REQUEST
	APPROVAL_COMPLETED
	REJECTION
}

class CompanyMapping {
	<<entity>>
	-companyMappingId: String
	-company: Company
	-assignedEngineer: User
	-assignedSales: User
	-serviceLine: ServiceLine
	+getAssignedEngineer()
	+getAssignedSales()
	+updateMapping()
}

class Company {
	-companyId: String
}

class Client {
	<<entity>>
	-clientId: String
	-name: String
	-companyName: String
	-primaryContact: String
	-industry: String
	+getContact()
}

class OnCall {
	<<entity>>
	-engineerId: String
	-name: String
	-date: Date
}

class User {
	<<entity>>
	-userId: String
	-name: String
	-email: String
	+notify(Notification)
}

class RequestLifecycleState {
	<<enumeration>>
	OPEN
	RECEIVED
	PENDING
	IN_PROGRESS
	COMPLETED
	AWAITING_REVIEW
	REVIEWED
	AWAITING_APPROVAL
	APPROVED
	SENT_FOR_REVIEW
	SENT_FOR_APPROVAL
}

class ServiceLine {
	<<enumeration>>
	CEMENTING
	PRODUCTION
	OTHER
}

class JobType {
	<<enumeration>>
	SURFACE
	INTERMEDIATE
	LINER
	OTHER
}

ProgramRequest "1" --> "*" ProgramJob : contains
ProgramRequest "1" --> "*" Document : has
ProgramRequest "1" --> "*" ActivityLog : has
ProgramRequest "1" --> "*" Approval : has
ProgramRequest "1" --> "*" Notification : generates
ProgramRequest "*" --> "1" Client : belongsTo
ProgramRequest "*" --> "1" CompanyMapping : company
ProgramRequest "1" --> "1" RequestType : type
ProgramRequest "1" --> "1" Priority : type
ProgramRequest "1" --> "1" RequestLifecycleState: state

Approval "1" --> "1" ApproverType : type

ProgramJob "*" --> "*" Document : has
ProgramJob "1" --> "1" ComplexityColor : uses
ProgramJob "1" --> "1" JobType : type

CompanyMapping "1" --> "1" User : mapsTo
CompanyMapping "1" --> "1" User : mapsToSales

User "1" --> "*" ProgramRequest : assignedTo
User "1" --> "*" Notification : receives

Approval "*" --> "1" User : requestedFrom
Approval "*" --> "1" User : canRequest

Notification "*" --> "1" ProgramRequest : about
Notification "*" --> "1" User : to
Notification "1" --> "1" NotificationType : type

ActivityLog "*" --> "1" ProgramRequest : for

CompanyMapping "1" --> "1" Company : mapsTo
CompanyMapping "1" --> "1" User : assignedTo

OnCall "*" --> "1" User : onCall

```
