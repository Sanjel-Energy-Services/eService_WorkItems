# Sanjel eService Framework Upgrade Plan



## Objective: 

- Consolidate applications to support business process optimization
- Upgrade eService to modern .Net 6 framework

## Phases

The whole journey will be broken down to multiple phases, all applications will stay running seamlessly during the process.

### 1. Build Blend Library - Code Development Completed 

One blend master database and blend calculator serves all applications.

### 2. Split Printing Library - Code Development Completed

One printing library serves all applications, replace legacy printouts to make PDF copy available automatically.

### 3. Split Well Library

On well library serves all application, include well location parsing, wellbore definition.

### 4. Replace Logging library 

- Introduce Metashare.Logging library, it is a SeriLog based library.
- Log files format, location, retention cycle will be determined.

### 5. Replace Messaging Library

- Introduce Metashare.Messaging library, it is a MQTT based library. There will be a shared effort to enhance messaging library to meet Sanjel's requirement. 

- Replace local data message queue. Currently Local Data library is generated by MMC and used in Eservice Express. The local data is sent to server database by using eService Messaging library. The message queue name is MessageQueueEx, the server endpoint is eServiceOnline.WCFServices. 

- Add PLC data transmission to message queue. Currently PLC data is packed in job package, we are experiencing the local plc data clean up  issue very often. With this implementation, we will achieve a real-time PLC data transmission, this will allow remote monitoring possible.

  - Alternative solution,  will Azure IOT Hub be a solution to accommodate this need as well?

- Add Eservice data transmission to message queue. Currently job package data is transferred by eService Messaging Library. eService Messaging Library was developed almost two decades ago by Sanjel development team. It is still working and stable, but it lack of the modern message queue features, such like monitoring, guarantee of delivery, subscription mechanism, multiple topic supports, etc. 

- Retire Sanjel Messaging Libary

  

### 6. Upgrade Sanjel Business Entity Library

- Consolidate Sanjel Business Entity with Sanjel Data Model, enter model in MMC.
- Introduce SQLite database to replace File System/xml.
- Redevelop all printouts to make a modern look and feel, support e-signature.
- Clean up local attachment/MS Excel Utility to remove dependency to legacy caching mechanism.
- Refactor Reference Data update using SanjelData as source, remove dependency on WCF service.
- Replace eService Online Gateway,  Web Api + Asynchronous programing to improve performance. Old Sanjel Business Entity Library will be used as DTO to maintain front end compatibility.

- Management tools separation

  - Master Data management tool

  - Price Book Management tool

  - Data Hand Book Management tool

  - Security Management tool

    

### 7. Upgrade Win UI to .Net 6

- Upgrade eProgram to .Net 6

- Upgrade eService to .Net 6

- Upgrade eServiceExpress to .Net 6

  

### Alternative solution

During the entity library upgrade, we may have the opportunity to review eService application. We may be able to simplify eService UI to allow a new look  and feel.  



