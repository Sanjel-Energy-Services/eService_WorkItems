# Variable Pay Integration Instruction



## eService to PowerApps



### Service Report to Work Assignment

- Trigger: Job Package is approved.

- API Format: http://[hostserver]/[ApplicationName]/WorkAssignment/SyncWorkAssignments/[Job Unique Id]

- API Example:
  - Support Environment: http://sanjel08/eServiceOnline.WebApi/WorkAssignment/SyncWorkAssignments/92be823e-a0e2-45a4-b8ad-bfb9034818d2
  - Production Environment: http://sanjel04/eServiceOnline.WebApi/WorkAssignment/SyncWorkAssignments/92be823e-a0e2-45a4-b8ad-bfb9034818d2

- Return Message Format: Return message is a serialized JSON object which structured as following.

  ```json
  {"result":[bool],"jobUniqueId":"[GUID]","message":"[Succeed messge or Exception Message]"}
  ```

- Return Message Example:

  ```json
  {"result":true,"jobUniqueId":"92be823e-a0e2-45a4-b8ad-bfb9034818d2","message":"Succeed"}
  ```

- Additional Comments: 

  - This API allows to run multiple times over a job, the work assignments generated by last call will be updated per the change in current call. This will allow field manager to request pushing ticket for re-approval.



### Work Assignment to Pay Entry

- Trigger: Job Package is approved and work assignments are synced

- API Format: http://[hostserver]/[ApplicationName]/VariablePay/CalculateVariablePayToJob/[Job Unique Id]

- API Example:
  - Support Environment: http://sanjel08/eServiceOnline.WebApi/VariablePay/CalculateVariablePayToJob/92be823e-a0e2-45a4-b8ad-bfb9034818d2
  - Production Environment: http://sanjel04/eServiceOnline.WebApi/VariablePay/CalculateVariablePayToJob/92be823e-a0e2-45a4-b8ad-bfb9034818d2

- Return Message Format: Return message is a serialized JSON object which structured as following.

  ```json
  {"result":[bool],"jobUniqueId":"[GUID]","message":"[Succeed messge or Exception Message]"}
  ```

- Return Message Example:

  ```json
  {"result":true,"jobUniqueId":"92be823e-a0e2-45a4-b8ad-bfb9034818d2","message":"Succeed"}
  ```

- Additional Comments: 

  - This API allows to run multiple times over a job, the pay entries generated by last call will be updated per the change in current call. This will allow field manager to request pushing ticket for re-approval. 

    

### Pay Entry to SharePoint List

[To Be Continued]

## PowerApps to eService

[To Be Continued]