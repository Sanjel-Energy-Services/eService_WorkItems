> 日期和时间： 2026-01-12 20:13:17
> 地点：[输入地点]
> 与会人员：[输入与会人员]
## 概述
本次会议纪要整合了于2026年01月12日举行的三次相关会议内容，主要围绕水泥调度系统的逻辑设计、界面实现及开发分工展开。会议讨论了两种核心调度场景：已知和未知`call sheet`的情况，明确了以钻机（`rig`）为核心的业务追踪模式。同时，会议详细梳理了调度界面的功能逻辑与布局方案，解决了第三方销售、带车队（Go with crew）等复杂场景下的交互问题。最后，会议确定了前后端开发、UI设计及测试的任务分工，并明确了技术实现细节与样式规范。
## 关键议题
- **水泥调度的两种核心场景**
  - 会议讨论了基于`call sheet`是否确定而产生的两种不同操作流程。
  - **场景一：`call sheet` 已确定**
    - 当用户为某个`call sheet`进行调度时，系统可以明确这批水泥的最终用途。
    - 系统会自动带出与该`call sheet`关联的所有信息，包括钻机（`rig`）信息，这些信息将变为只读状态。
    - 用户需要明确水泥从哪个搅拌站（`batch plant`）的哪个料仓（`bin`）装载。
    - 界面上需要解决的核心问题是“怎么拉”（如：`go with crew`或第三方车队）和“怎么装车”。
  - **场景二：`call sheet` 未确定**
    - 当水泥是为某个`program`生产，但尚未明确分配给具体的作业（`job`）时，`call sheet`是未知的。
    - 系统可通过`batch request`反向追溯到其所属的`program`以及相关的配方来源等信息。
    - 由于一个`program`可能对应多个作业（`job`），系统会列出所有与该`program`相关联的`call sheet`供用户选择。
    - 用户选择`call sheet`后，相应的`rig`信息将被自动确定并填充。
- **钻井平台（Rig）的选择逻辑**
  - 会议对`rig`的选择规则和业务背景进行了深入探讨。
  - **以 `Rig` 为核心的追踪模式**
    - 公司的核心业务是追踪`rig`（钻井架）的作业动态，而不是`rig`的地理位置。
    - `rig`是钻井公司的资产，会根据与不同石油公司的合同在不同地点间移动。
    - 系统只需要追踪到具体的`rig`即可，运输目的地由客户决定。
  - **未选 `call sheet` 时的 `Rig` 选择**
    - 如果在调度时未选择`call sheet`，意味着虽然知道水泥属于哪个`program`，但不知道具体用于哪口井的作业。
    - 在这种情况下，系统应加载数据库中所有的`rig`主数据，供用户选择，此时`rig`的选择不受限制。
    - 一个`program`可能用于一个区块（`multi-well`）上的多口井，这些井虽然地理位置相近，但可能使用不同的`rig`。具体使用哪个`rig`由客户指定。
- **Go with Crew**
  - 讨论了一种可能性：当水泥运送到某个`rig`，但该`rig`没有可用的料仓（`bin`）时，是否意味着水泥车需要留在现场等待（`Go with Crew`），而不是卸货。
  - 这是一个需要进一步确认的场景，因为当前没有明确的数据或业务规则来支持这一流程。
- **界面功能与业务场景梳理**
  - **核心问题**：现有调度界面需要处理多种业务场景，导致逻辑复杂。
    - 当用户选择了`call sheet`（作业单），界面上会出现`go with crew`（跟随泵车车队）的选项。若不选择`call sheet`，则该选项不出现，用户需要自行规划运输计划。
    - 在没有选择 `bin`（料仓）的情况下，系统原本不允许保存，以防数据不完整。
    - 针对第三方销售（`product sale`）的特殊场景，即使没有 `bin` 信息，系统也必须允许保存，因为这属于产品销售业务，而非标准作业流程。此场景下，流程在货物运抵（`on location`）后即告结束。
    - 当用户选择`load existing haul`（装载已调度的产品）时，界面上已分配了物料的货仓将不可再选，用户只能选择剩余的空货仓进行装载。
- **界面设计与布局方案**
  - **设计讨论**：会议探讨了如何组织界面元素以应对复杂的业务逻辑。
    - **单页面 vs. 多页面**：一种方案是将所有功能和场景整合到一个页面中，通过动态显示和隐藏各部分来适配不同情况。另一种方案是为不同场景设计不同的页面。
    - **模块化/分块设计**：建议将界面按逻辑功能分块，例如客户信息、作业信息、调度信息等。这样有助于复用逻辑和简化开发。点击一个选项（如`load to existing haul`）会替换或隐藏整个功能块。
    - **布局与控件排列**：讨论了采用单列、双列还是多列布局。虽然双列或多列可以节省空间，但需要确保布局清晰。控件的排列应遵循业务逻辑的先后顺序，例如，`bin` 的显示依赖于 `rig` 的选择。
    - **动态显示问题**：提到 `bin` 的数量可能是动态的（单数或双数），在设计时需要考虑如何美观地展示，例如每行显示一个。
- **开发实施建议**
  - **逻辑优先原则**：强调在开发前必须彻底理清界面各部分的层次和联动关系。不清晰的逻辑会导致代码混乱，难以维护，例如在页面下方操作却要影响上方元素的显示。
  - **原型设计**：建议在动手编码前，先绘制界面草图或原型。这有助于在开发前将逻辑想清楚，明确各功能区的划分、元素的显隐规则以及交互方式。
  - **统一界面样式**：指出当前界面的样式（如标签颜色）与原有系统不一致，看起来不清晰，需要进行统一调整，确保与既有设计规范保持一致。
- **前端UI设计与实现**
  - **样式规范**
    - 按钮统一为“白字红底”。
    - 数据输入框为白色。
  - **开发任务**
    - 张院将基于现有设计进行修改，先制作一版UI界面供团队审阅。
    - 开发工作将停留在模型（model）层面，通过模拟（mock）数据进行前端行为的开发。例如，当rig变更时，前端会向service层发送请求，并接收模拟的bin information数据。
- **后端任务与数据逻辑**
  - **主要任务**
    - 宝红负责识别和梳理前端可能向后端发起的所有请求，并准备好相应的服务。
    - 后续陶秋峰会整理整个实现模式，以便进一步明确具体实现细节。
  - **数据获取逻辑**
    - **动态列表**: “Existing haul”的列表需要动态请求，其逻辑与eServiceOnline保持一致，只显示已调度但未发车的车辆信息。
    - **异步请求**: `crew`等列表信息也建议采用异步方式分开获取。
    - **`call sheet`列表**: 当一个`blend`已装载（`load to bin`），系统会通过其`load sheet ID`反向查找对应的`program`信息。然后，根据这个`program`，过滤并显示所有相关的`call sheet`列表。这并非基于配方相同，而是基于来自同一个`program`。
  - **特殊场景处理**
    - **Product Sale场景**: 允许在没有选择`rig`和`bin`的情况下保存。这种情况下，将不会生成卸车单，卸车说明部分为空。
    - **卸车操作**: 卸车状态的变更是在DRB系统的Job Board上操作的，不在此次开发范围内。当车辆状态更新为“on location”时，系统会自动完成卸车并更新水泥信息到`bin`中。
- **测试用例**
  - **负责人**: 杨晨负责编写各个场景的测试用例。
  - **范围**: 需要覆盖所有入口场景（约3个）以及内部的具体操作流程，确保所有情况都被考虑到。
  - **交付**: 杨晨需要尽快做出主用例，以便开发人员参考。
- **任务管理与分工**
  - **任务分配**
    -  **张院**: 负责前端界面开发。
    - **宝红**: 负责后端服务实现。如果工作量过大，秋风可能会协助。
    - **杨晨**: 负责编写测试用例。
  - **任务系统更新 (132)**
    - 现有的任务项（如285）已过期，不能再使用。
    - 团队需要在`132`下新建任务，或修改现有任务（如将`540`改为UI任务），并添加一个新的后端任务。
    - 各负责人需明确任务内容，重新评估工作时间，并将更新后的估时信息添加到`132`下面。
- **开放问题与风险**
  - **`program`版本升级影响**: 有一个未决问题，即如果`program`的版本（如从01升级到02、03）发生变化，当前系统是否能正确处理`call sheet`的显示。目前的决定是暂时按现有逻辑实现，后续需要时再修改。
## 行动项
- [ ] 梳理并明确界面上所有场景的逻辑层次关系和模块划分。
- [ ] 绘制界面原型或草图，明确布局、控件排列及交互逻辑。
- [ ] 统一调整新界面的UI样式，使其与原有系统保持一致。
- [ ]  **张院**: 基于现有设计制作第一版UI界面。
- [ ] **宝红**: 识别前端向后端发起的所有请求，并梳理相关服务；根据现有理解开始工作，并拆分任务。
- [ ] **杨晨**: 编写覆盖所有场景的测试用例，并尽快提供主用例。
- [ ] **所有负责人**: 在任务系统`132`下新建或更新各自的任务，并重新估算时间。

> **AI建议**
> 经AI分析，本次会议中有以下问题未形成结论或缺少明确的行动项，请相关人员关注：
> 1. **调度界面整体设计逻辑悬而未决，影响开发启动：** 会议未能明确调度（Hop Plan）界面的整体交互逻辑，特别是客户信息、作业信息、调度安排等功能区块之间的层级与联动关系。例如，用户选择`call sheet`或`load existing haul`后，其他界面元素应如何动态变化，目前尚无定论。这个问题是后续UI设计和前端开发的基础，不解决将导致开发工作无法正常启动。
> 2. **`call sheet`筛选逻辑存在风险，可能导致数据错乱：** 当`program`版本发生变更（如从01版更新到02版）时，系统如何正确筛选并显示关联的`call sheet`，其后端处理逻辑尚未确定。会议决定暂时沿用现有逻辑，但该逻辑可能无法正确处理版本更新，存在向用户展示错误数据的风险，是项目的一个关键风险点。
> 3. **“跟人走”业务场景定义缺失，无法支持相应功能开发：** 会议讨论了当水泥车到达井队但井队无可用灰罐时的处理方式，提出了“跟人走”（即车辆在现场等待）的可能性。然而，这一特殊业务场景的具体业务规则、数据支持和系统工作流均未明确。在获得业务方进一步澄清前，后端无法设计相应的数据模型和处理逻辑。
> 4. **UI原型设计与风格统一责任不清：** 虽然会议提出需要创建UI原型来明确界面布局和交互流程，并要求新界面与现有系统风格保持一致，但并未指定由谁负责最终的原型设计、由谁负责审核，也未设定完成期限。这可能导致UI设计延迟或与现有规范脱节。
> 5. **前后端接口定义与工作量评估尚未完成：** 后端团队需要明确前端在不同场景下所需的所有API接口，但完整的接口列表和详细的数据结构尚未最终确定。同时，所有团队成员（前端、后端、测试）需要重新评估工作量并更新至项目管理系统，但会议未设定完成此项任务的截止日期，可能影响项目排期和资源协调。